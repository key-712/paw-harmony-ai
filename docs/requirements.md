### アプリ機能一覧

**【必須機能 (MVP: Minimum Viable Product)】**
アプリの核となる、最低限必要な機能をリストアップします。まずは MVP でリリースし、ユーザーの反応を見たいです。

1.  **ユーザー登録・ログイン機能**
2.  **犬のプロフィール登録・管理機能**
3.  **AI パーソナライズ音楽生成機能**
4.  **音楽再生・タイマー機能**
5.  **フィードバック（犬の反応評価）機能**
6.  **マイページ（犬のプロフィール、履歴閲覧）機能**
7.  **サブスクリプション（プレミアムプラン）管理機能**

**【あれば良い機能（将来的な追加機能）】**
ユーザーの利便性を高める、将来的に追加したい機能を検討します。

1.  詳細な「犬の好き」分析レポート（プレミアム）
2.  広告非表示（プレミアム）
3.  専門家監修コンテンツ（プレミアム）
4.  コミュニティ機能（無料版は限定アクセス、プレミアム版は強化）
5.  新機能の先行利用（プレミアム）
6.  EC 連携/グッズ販売
7.  提携サービス連携
8.  生体データ連携（犬用ウェアラブルなど）
9.  複数の犬の登録・管理
10. オフライン再生機能
11. 音楽のお気に入り登録・プレイリスト作成

---

### MVP 機能要件定義

ここから、上記の MVP 必須機能について、要件定義書ガイドに従って詳細を記述します。

---

```markdown
# ユーザー登録・ログイン機能 要件定義書

## 📋 概要

ユーザーがアプリを安全に利用開始し、継続的にアクセスするための基盤となる機能。新規ユーザーの登録と既存ユーザーのログインを管理する。

## 🎯 要求

- 新規ユーザーがメールアドレスとパスワードでアカウントを作成できること。
- 既存ユーザーが登録済みのメールアドレスとパスワードでログインできること。
- パスワードを忘れた際に再設定できること。
- アカウント情報の安全性を確保すること。

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. 新規登録画面

- タイトル: 「新規アカウント作成」
- 入力フォーム:
  - メールアドレス (必須、バリデーション: メールアドレス形式)
  - パスワード (必須、バリデーション: 8 文字以上、半角英数字記号の組み合わせ)
  - パスワード確認 (必須、バリデーション: パスワードと一致)
- ボタン:
  - 「アカウントを作成」ボタン
  - 「ログインはこちら」リンク (ログイン画面へ遷移)
- 注意事項: プライバシーポリシー、利用規約への同意チェックボックス (必須)

#### 2. ログイン画面

- タイトル: 「ログイン」
- 入力フォーム:
  - メールアドレス (必須)
  - パスワード (必須)
- ボタン:
  - 「ログイン」ボタン
  - 「パスワードをお忘れですか？」リンク (パスワード再設定画面へ遷移)
  - 「新規登録はこちら」リンク (新規登録画面へ遷移)

#### 3. パスワード再設定画面

- タイトル: 「パスワードの再設定」
- 入力フォーム:
  - 登録済みメールアドレス (必須)
- ボタン:
  - 「パスワード再設定メールを送信」ボタン

### 振る舞い

#### 1. 新規登録

- ユーザーがメールアドレス、パスワード、パスワード確認を入力し、利用規約等に同意して「アカウントを作成」ボタンをタップ。
- 入力値のバリデーションに失敗した場合、エラーメッセージを表示。
- 成功した場合、アカウントが作成され、自動的にログイン後、犬のプロフィール登録画面へ遷移。
- 既に登録済みのメールアドレスの場合、その旨のエラーメッセージを表示。

#### 2. ログイン

- ユーザーがメールアドレスとパスワードを入力し、「ログイン」ボタンをタップ。
- 入力値のバリデーションに失敗した場合、エラーメッセージを表示。
- 認証に失敗した場合（メールアドレスまたはパスワードが間違っている場合）、エラーメッセージを表示。
- 認証に成功した場合、トップページ（AI 音楽生成画面）へ遷移。

#### 3. パスワード再設定

- ユーザーが登録済みメールアドレスを入力し、「パスワード再設定メールを送信」ボタンをタップ。
- 入力されたメールアドレス宛にパスワード再設定用の URL を含んだメールを送信。
- メール送信成功のメッセージを表示し、ログイン画面へ遷移。
- 未登録のメールアドレスの場合、その旨のエラーメッセージを表示（セキュリティのため、登録の有無は明確に伝えない）。
- 受信した URL から新しいパスワードを設定するフローは、Web ブラウザ経由で行うことを想定。

### 制約条件

- パスワードはハッシュ化して保存すること。
- セッション管理はセキュアな方法で行うこと。
- メールアドレスはユニークであること。
- Google/Apple などのソーシャルログインは MVP では対象外。

## 📊 データ要件

- **ユーザーテーブル**:
  - `id` (UUID)
  - `email` (文字列, ユニーク)
  - `password_hash` (文字列)
  - `created_at` (日時)
  - `updated_at` (日時)

## 🔄 インタラクション

- バックエンド API との通信によるユーザー情報の登録、認証、パスワード再設定処理。
- メール送信サービスとの連携 (パスワード再設定メール)。

## ❓ 未解決の質問

- パスワード再設定のメール有効期限はどれくらいか？ (例: 30 分)
- パスワード再設定のトークンは 1 度しか使用できないようにするか？
- メールアドレスの確認（認証）は MVP に含めるか？ (現状は含めない想定)
- 複数デバイスでの同時ログインの挙動はどうするか？
```

---

```markdown
# 犬のプロフィール登録・管理機能 要件定義書

## 📋 概要

ユーザーが愛犬の情報を登録し、AI がパーソナライズされた音楽を生成するための基礎データを提供する機能。

## 🎯 要求

- 愛犬の名前、犬種、生年月日（または年齢）、性別、性格を登録できること。
- 登録したプロフィールを後から編集できること。
- 愛犬の写真を登録・変更できること。

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. 犬のプロフィール登録画面 (初回ログイン時、またはマイページからの追加時)

- タイトル: 「愛犬のプロフィールを登録」
- 入力フォーム:
  - 愛犬の名前 (必須、文字列)
  - 犬種 (必須、プルダウンまたは検索可能なリスト。例: トイプードル、柴犬、ミックスなど)
  - 生年月日 (任意、日付ピッカー。年齢は自動計算) / 年齢 (任意、数字入力。生年月日とどちらか一方でも可)
  - 性別 (必須、ラジオボタン: オス, メス)
  - 性格 (必須、複数選択可または単一選択のタグ形式。例: おっとり, 活発, 臆病, 社交的, 甘えん坊, マイペースなど)
  - 写真アップロード (任意、画像ファイル選択ボタン)
- ボタン:
  - 「登録する」ボタン
  - (初回登録時以外) 「キャンセル」ボタン

#### 2. 犬のプロフィール編集画面 (マイページから遷移)

- タイトル: 「愛犬プロフィール編集」
- 構成は登録画面と同様、既存情報が入力済みで表示される。
- ボタン:
  - 「更新する」ボタン
  - 「キャンセル」ボタン

### 振る舞い

#### 1. プロフィール登録

- ユーザーが各項目を入力し、写真をアップロードして「登録する」ボタンをタップ。
- 必須項目の入力チェックを行う。
- 成功した場合、データが保存され、トップページ（AI 音楽生成画面）へ遷移。
- 写真アップロードは、デバイスの画像ギャラリーから選択、またはカメラで撮影。

#### 2. プロフィール編集

- マイページから犬のプロフィール編集を選択すると、登録済みの情報がフォームに表示される。
- ユーザーが情報を変更し、「更新する」ボタンをタップ。
- 成功した場合、データが更新され、マイページへ戻る。

### 制約条件

- MVP では、1 つのユーザーアカウントにつき 1 匹の犬の登録に限定する（複数頭飼育の機能は将来的な追加）。
- 写真のファイルサイズ、形式に制限を設ける（例: JPEG/PNG, 最大 5MB）。

## 📊 データ要件

- **犬プロフィールテーブル**:
  - `id` (UUID)
  - `user_id` (UUID, ユーザーテーブルへの外部キー)
  - `name` (文字列)
  - `breed` (文字列)
  - `date_of_birth` (日付, 任意) または `age` (整数, 任意)
  - `gender` (文字列: 'male', 'female')
  - `personality_traits` (文字列配列または JSONB: 例: ['おっとり', '甘えん坊'])
  - `profile_image_url` (文字列, S3 などの URL)
  - `created_at` (日時)
  - `updated_at` (日時)

## 🔄 インタラクション

- バックエンド API との通信による犬プロフィールの保存、更新、取得。
- 画像ストレージサービス（例: AWS S3, Firebase Storage）との連携。

## ❓ 未解決の質問

- 犬種のリストはどこから取得するか？ (例: 固定リスト、外部 API)
- 性格の選択肢は具体的にいくつ用意するか？
- 生年月日と年齢のどちらを主にするか、または両方を入力可能にするか？ (現状、両方可能で年齢を自動計算する方向で検討)
```

---

```markdown
# AI パーソナライズ音楽生成機能 要件定義書

## 📋 概要

愛犬のプロフィールと現在の状況に基づいて、AI が最適なパーソナライズ音楽を生成し、ユーザーに提供する。

## 🎯 要求

- ユーザーが選択した利用シーンと犬の状態に応じて、AI が音楽を生成すること。
- 無料版では生成回数や再生時間に制限があること。
- 生成された音楽をすぐに再生できること。

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. トップページ (AI 音楽生成画面)

- タイトル: 「PawHarmony AI」
- 愛犬のプロフィール情報表示 (名前、写真など)
- 音楽生成のための選択/入力 UI:
  - **利用シーン選択**: (必須、タグ形式またはラジオボタン)
    - 例: 留守番中, 就寝前, ストレスフル (雷/花火/来客), 長距離移動中, 日常の癒し, 療養/高齢犬ケア
  - **犬の状態選択**: (必須、タグ形式またはラジオボタン)
    - 例: 落ち着かせたい, リラックスさせたい, 興奮を抑えたい, 安心させたい, 安眠させたい
  - **(任意) その他の情報入力欄**: テキスト入力（例: 「最近、夜泣きが多い」「初めての場所で緊張している」など、より詳細な情報提供用）
- ボタン:
  - 「音楽を生成する」ボタン
- (無料版の場合) 残り生成回数または再生時間制限の表示

### 振る舞い

#### 1. 音楽生成リクエスト

- ユーザーが利用シーンと犬の状態を選択し、「音楽を生成する」ボタンをタップ。
- 必須項目が選択されていない場合、エラーメッセージを表示。
- 無料版の場合、生成回数や再生時間の制限を超えていれば、プレミアムプランへの誘導メッセージを表示。
- リクエスト後、ローディングインジケータを表示し、AI による音楽生成を待機。
- 生成が完了したら、自動的に音楽再生画面へ遷移し、生成された音楽の再生を開始。

### 制約条件

- AI による音楽生成には一定の時間（数秒〜数十秒）がかかることを想定し、ローディング UX を考慮すること。
- 生成される音楽のフォーマットは MP3 などの標準的なオーディオ形式とすること。
- 無料版の生成回数、再生時間制限はバックエンドで管理し、クライアント側で表示を制御する。
- AI 生成の API 呼び出し回数制限など、コスト面を考慮すること。

## 📊 データ要件

- **音楽生成リクエストデータ**:

  - `user_id`
  - `dog_id`
  - `scenario` (文字列: 例: '留守番中')
  - `dog_condition` (文字列: 例: '落ち着かせたい')
  - `additional_info` (文字列, 任意)
  - `generated_at` (日時)

- **AI 音楽生成履歴テーブル**:
  - `id` (UUID)
  - `user_id` (UUID)
  - `dog_id` (UUID)
  - `scenario` (文字列)
  - `dog_condition` (文字列)
  - `generated_music_url` (文字列, S3 などの URL)
  - `duration` (整数, 秒)
  - `created_at` (日時)

## 🔄 インタラクション

- バックエンド API への音楽生成リクエスト送信。
- AI 音楽生成エンジン（外部 API または自社 AI モデル）との連携。
- 生成された音楽ファイルの保存先ストレージサービス（S3 など）からの URL 取得。

## ❓ 未解決の質問

- AI が音楽を生成する際のパラメータとして、犬のプロフィール情報（犬種、性格）をどのように渡すか？ (サーバーサイドでプロフィール情報を取得し、AI に渡す想定)
- AI 音楽生成 API の選定と連携方法の具体化（料金体系、応答時間、生成される音楽の多様性など）。
- 音楽の著作権処理をどうするか？ (AI 生成音楽の法的位置付けは未確定な部分もあるため、慎重な検討が必要)
- 1 回の生成で複数の音楽パターンを生成し、ユーザーが選択できるようにするか？ (MVP では 1 パターンで OK)
```

---

```markdown
# 音楽再生・タイマー機能 要件定義書

## 📋 概要

AI が生成したパーソナライズ音楽を再生し、ユーザーが再生を制御（再生/一時停止、タイマー設定）できるようにする機能。

## 🎯 要求

- 生成された音楽をアプリ内で再生できること。
- 音楽の再生/一時停止を制御できること。
- 指定した時間で自動的に再生を停止するタイマーを設定できること。
- バックグラウンド再生に対応すること。

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. 音楽再生画面

- タイトル: 「再生中」または「PawHarmony AI」
- 現在再生中の音楽情報:
  - 音楽のタイトル (例: 「[犬の名前] のためのリラックスサウンド」)
  - 音楽のジャンル/雰囲気 (AI が生成時に付与する情報、例: 「静かな自然音とメロディ」)
  - 再生時間のプログレスバー
  - 現在時刻 / 合計時間
- 再生コントロールボタン:
  - 再生/一時停止ボタン (トグル)
  - 停止ボタン
  - (MVP ではスキップボタンは不要)
- タイマー設定 UI:
  - タイマー設定ボタン (タップでタイマー設定モーダル/シートを表示)
  - 設定されたタイマー時間表示 (例: 「タイマー: 30 分後停止」)

#### 2. タイマー設定モーダル/シート

- タイトル: 「再生タイマーを設定」
- 時間選択コンポーネント (例: ピッカーで 15 分, 30 分, 1 時間, 2 時間, 3 時間, 連続再生 など)
- ボタン:
  - 「設定」ボタン
  - 「キャンセル」ボタン

### 振る舞い

#### 1. 音楽再生

- 音楽生成後、自動的にこの画面に遷移し、音楽が再生される。
- ユーザーが再生/一時停止ボタンをタップすると、再生状態が切り替わる。
- 停止ボタンをタップすると、再生が停止し、再生時間がリセットされる。
- バックグラウンドに移行しても音楽再生は継続される。

#### 2. タイマー設定

- タイマー設定ボタンをタップすると、タイマー設定モーダル/シートが表示される。
- ユーザーが時間を選択し、「設定」ボタンをタップすると、タイマーが設定され、モーダルが閉じる。
- 設定された時間が経過すると、音楽は自動的に停止する。

### 制約条件

- 音声フォーマットはブラウザ互換性の高いもの（MP3 など）を使用する。
- ユーザーが設定したタイマー情報は、アプリを終了しても保持されること（セッション内での保持、永続化は MVP では不要）。

## 📊 データ要件

- **再生中の音楽情報**: (クライアント側の一時データ)
  - `music_id` (再生中の音楽の ID)
  - `music_url`
  - `duration`
  - `current_position`
  - `is_playing` (再生中かどうか)
  - `timer_end_time` (タイマーが設定されている場合)

## 🔄 インタラクション

- オーディオ再生 API (Web Audio API または `<audio>` タグ) の利用。
- ブラウザのバックグラウンド再生機能への対応。
- タイマー機能はクライアントサイドで実装（`setTimeout`/`setInterval`など）。

## ❓ 未解決の質問

- 再生プログレスバーの更新頻度は？ (例: 1 秒ごと)
- タイマーの最小/最大設定時間は？
- 音量調整機能は含めるか？ (OS の音量調整に依存させるか、アプリ内でも提供するか)
```

---

```markdown
# フィードバック（犬の反応評価）機能 要件定義書

## 📋 概要

再生中の音楽に対する愛犬の反応を飼い主が評価・記録し、AI の学習データとして活用するための機能。

## 🎯 要求

- 音楽再生中に愛犬の反応を評価できること。
- 5 段階の感情評価と、具体的な行動タグを付与できること。
- 評価データが AI の学習に利用されること。
```

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. フィードバック入力 UI (音楽再生画面内またはモーダル)

- 表示トリガー: 音楽再生画面に常に表示、または特定のタイミング（例: 再生開始後数分経過、再生終了時）でポップアップ。MVP では常時表示がシンプル。
- 評価スケール:
  - 5 段階評価 (例: 非常にリラックスした, リラックスした, 変化なし, 少し興奮した, 非常に興奮した)
  - アイコン表示 (笑顔、通常顔、困り顔など)
- 行動タグ選択: (複数選択可)
  - 例: 吠えなくなった, 落ち着いて寝た, 遊んでいた, そわそわしていた, 呼吸が穏やかになった, 耳が下がっていた など
- コメント入力欄 (任意): テキストエリア (例: 「いつもより早く寝てくれた」「雷が鳴っても大丈夫だった」)
- ボタン:
  - 「フィードバックを送信」ボタン (評価とタグを選択しないと無効)

### 振る舞い

#### 1. フィードバック入力と送信

- ユーザーが 5 段階評価を選択し、必要に応じて行動タグとコメントを入力。
- 「フィードバックを送信」ボタンをタップ。
- 成功した場合、フィードバックデータがバックエンドに送信され、UI からフィードバック入力欄が一時的にクリアされるか、送信完了メッセージを表示。
- 同じ音楽再生セッション中に複数回のフィードバックを送信できる（例: 最初は「変化なし」だったが、途中で「リラックス」に変化した場合）。その場合、最新のフィードバックが優先されるか、複数記録されるか検討が必要。（MVP では、音楽セッションにつき複数回記録し、AI はそれらの総合で判断する形を想定）

### 制約条件

- フィードバックは匿名化して AI 学習に利用されること。
- フィードバック送信時には、どの音楽に対する評価か、どの犬の評価か、再生開始からの経過時間などを紐付けて送信すること。

## 📊 データ要件

- **フィードバックテーブル**:
  - `id` (UUID)
  - `user_id` (UUID)
  - `dog_id` (UUID)
  - `music_history_id` (UUID, どの再生セッションに対する評価か)
  - `rating` (整数: 1-5)
  - `behavior_tags` (文字列配列または JSONB: 例: ['落ち着いて寝た', '呼吸が穏やかになった'])
  - `comment` (文字列, 任意)
  - `feedback_at_playback_time` (整数, 秒: 再生開始から何秒経過した時点での評価か)
  - `created_at` (日時)

## 🔄 インタラクション

- バックエンド API へのフィードバックデータ送信。
- 送信されたフィードバックは、AI 学習モデルの入力データとして利用される。

## ❓ 未解決の質問

- 音楽再生中のどのタイミングでフィードバックを促すか？ (MVP では常時表示だが、より効果的なタイミングは？)
- 複数回のフィードバックが送信された場合のデータの扱い（上書き、追加、平均化など）。(現状は追加で、AI 側で判断を想定)
- 評価の頻度制限は設けるか？ (例: 1 分間に 1 回までなど)

````

---

```markdown
# マイページ（犬のプロフィール、履歴閲覧）機能 要件定義書

## 📋 概要

ユーザーが愛犬のプロフィールを確認・編集し、過去の音楽生成・再生履歴とそのフィードバックを閲覧できる機能。

## 🎯 要求

- 登録した愛犬のプロフィール情報を閲覧できること。
- 愛犬のプロフィールを編集できること。
- 過去にAIが生成した音楽の履歴を一覧で表示できること。
- 各音楽履歴に対して記録されたフィードバックを確認できること。

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. マイページ
- タイトル: 「マイページ」
- 愛犬のプロフィールセクション:
    - 愛犬の名前、プロフィール画像
    - 犬種、年齢、性別、性格などの情報表示
    - 「プロフィールを編集」ボタン (犬のプロフィール編集画面へ遷移)
- 音楽再生履歴セクション:
    - タイトル: 「音楽再生履歴」
    - 履歴リスト:
        - 各項目に: 生成日時、利用シーン、犬の状態、音楽タイトル、記録された評価アイコン（平均値または最新）、フィードバックコメントの簡易表示
        - 各項目をタップで詳細画面へ遷移（MVPでは詳細画面は不要、簡易表示のみ）

### 振る舞い

#### 1. プロフィール閲覧・編集
- ユーザーがマイページにアクセスすると、登録されている愛犬のプロフィール情報が表示される。
- 「プロフィールを編集」ボタンをタップすると、犬のプロフィール編集画面へ遷移する。

#### 2. 音楽再生履歴閲覧
- 音楽再生履歴セクションに、AIで生成・再生された音楽の履歴が新しい順に表示される。
- 無料版では表示件数に制限があるか、一部情報が非表示となる。
- 各履歴項目には、その音楽に対するフィードバックの概要（例: 5段階評価のアイコン、タグの一部）が表示される。

### 制約条件

- 履歴の表示件数: MVPでは直近20件など、一定数に制限を設ける。
- プレミアム版で提供される「詳細な分析レポート」はMVPでは対象外。

## 📊 データ要件

- **犬プロフィールテーブル**: (上記「犬のプロフィール登録・管理機能」参照)
- **AI音楽生成履歴テーブル**: (上記「AIパーソナライズ音楽生成機能」参照)
- **フィードバックテーブル**: (上記「フィードバック（犬の反応評価）機能」参照)

## 🔄 インタラクション

- バックエンドAPIから犬プロフィール情報、音楽生成履歴、フィードバックデータを取得し表示。

## ❓ 未解決の質問

- 履歴リストのスクロール時の挙動（ページネーション、無限スクロールなど）。
- 履歴データのフィルタリングやソート機能はMVPに含めるか？ (現状は含めない)
- 履歴から過去の音楽を再生成・再再生する機能はMVPに含めるか？ (現状は含めない。別途AI生成画面から条件指定で生成)
````

---

```markdown
# サブスクリプション（プレミアムプラン）管理機能 要件定義書

## 📋 概要

ユーザーがアプリのプレミアムプランに加入し、無料版の制限を解除し、追加機能を利用できるようにする機能。

## 🎯 要求

- プレミアムプランの内容と価格を明確に提示できること。
- ユーザーがプレミアムプランに加入できること。
- 現在のプラン状態を表示できること。
- App Store/Google Play の課金システムと連携し、支払い処理を行うこと。

## 📝 機能仕様

### 画面/コンポーネント構成

#### 1. プラン選択・詳細画面

- タイトル: 「プレミアムプラン」
- プレミアムプランのメリット表示:
  - 例: 「無制限の音楽生成」「詳細なレポート」「広告非表示」「専門家監修コンテンツ」などのリスト表示
- プラン選択 UI:
  - 月額プラン、年額プランの選択肢とそれぞれの価格表示 (例: 月額 500 円, 年額 5,000 円)
  - 割引額や期間の強調表示
- ボタン:
  - 「[プラン名]で始める」ボタン
  - 「無料版を続ける」リンク (オプション、プレミアムを促すための導線)
- 注意事項: 定期購入に関する説明、利用規約、プライバシーポリシーへのリンク

#### 2. サブスクリプション状態表示 (マイページ内)

- 現在のプラン表示 (例: 「現在のプラン: 無料版」, 「現在のプラン: プレミアムプラン (月額)」)
- プレミアムプランの場合、次回の更新日、課金状況などの簡易表示
- (オプション) 「プラン変更」「解約」への導線 (App Store/Google Play のサブスクリプション管理画面へのリンク)

### 振る舞い

#### 1. プラン加入

- ユーザーがプランを選択し、「始める」ボタンをタップ。
- iOS/Android のアプリ内課金 API を呼び出し、支払いフローを開始。
- 支払い成功後、ユーザーのプラン状態を「プレミアム」に更新。
- アプリの機能制限が解除され、プレミアム機能が利用可能になる。

#### 2. プラン状態表示

- ユーザーがマイページにアクセスすると、現在のプラン状態が表示される。
- 無料版ユーザーには、プレミアムプランへのアップグレードを促すメッセージや導線を表示。

### 制約条件

- App Store Connect および Google Play Console でのアプリ内課金設定が必須。
- サブスクリプションの購入、更新、キャンセルはプラットフォーム（Apple/Google）に準拠する。
- サーバーサイドでのレシート検証を行い、課金状態の信頼性を確保すること。

## 📊 データ要件

- **ユーザーテーブル**:
  - `subscription_status` (文字列: 'free', 'premium')
  - `subscription_start_date` (日時)
  - `subscription_end_date` (日時)
  - `last_receipt_data` (文字列, 最新の課金レシートデータ)
  - `platform_subscription_id` (文字列, App Store/Google Play でのサブスクリプション ID)

## 🔄 インタラクション

- App Store In-App Purchase API / Google Play Billing Library との連携。
- バックエンド API との通信によるサブスクリプション状態の更新とレシート検証。

## ❓ 未解決の質問

- 無料トライアル期間を設けるか？ (MVP では含めないが、将来的に検討)
- 支払いが失敗した場合のユーザーへの通知とリトライ処理。
- App Store/Google Play のサンドボックス環境でのテスト方法。
- プレミアムプランの解約後の挙動（機能制限の適用タイミング）。
```
